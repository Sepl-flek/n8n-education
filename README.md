
# ИИ-помогатор для баз знаний (Telegram → Google Sheets)

## Описание проекта

Данный проект представляет собой автоматизированного помощника для обработки документов в Telegram. Пользователь отправляет файл (PDF, DOCX, TXT или MD) боту, после чего происходит:

1. Извлечение текста из документа.
2. Автоматическая суммаризация текста (3–7 предложений).
3. Извлечение ключевых слов (5–10 слов).
4. Сохранение результатов в Google Sheets вместе с метаданными (имя файла, размер, тип, язык, имя отправителя, timestamp).

Главная цель — продемонстрировать цепочку **«ввод → обработка → результат»** с использованием готовых инструментов автоматизации (n8n, Grok API, CloudConvert).

## Используемые инструменты

* **n8n** — основная платформа для построения воркфлоу.
* **Telegram Trigger / Telegram Node** — приём документов и отправка уведомлений пользователю.
* **Extract from File / CloudConvert** — извлечение текста из PDF/DOCX/TXT.
* **Grok API (llama-3.1-8b-instant)** — суммаризация текста и выделение ключевых слов.
* **Google Sheets Node** — запись результатов в таблицу.
* **Set Node** — преобразование данных в нужный формат для записи в таблицу.


## Сложности при реализации

1. **Работа с моделью для суммаризации и ключевых слов**

   * Первоначально возникли сложности с форматом ответа. Модель иногда возвращала текст вне JSON, что ломало обработку воркфлоу.
   * Решение: добавление строгого системного запроса `You are a JSON API. You must return ONLY valid JSON…` и последующая обработка через Set Node.

2. **Конвертация DOCX и PDF в текст**

   * Прямое извлечение текста из некоторых документов работало нестабильно.
   * Решение: использование **CloudConvert** для конвертации в TXT перед отправкой на суммаризацию.


## Примеры работы

1. Пользователь отправляет файл `example.pdf` в Telegram.
2. Текст из документа извлекается и передается в Grok API.
3. Полученный JSON с суммаризацией и ключевыми словами сохраняется в Google Sheets:

| timestamp           | uploader  | file_name   | summary               | keywords            |
| ------------------- | --------- | ----------- | --------------------- | ------------------- |
| 2025-12-15 01:00:00 | sepl_user | example.pdf | Краткое содержание... | слово1, слово2, ... |

4. Пользователь получает уведомление: `"Данные загружены в таблицу"`.


## Возможные улучшения

* Добавить OCR для обработки сканов и изображений.
* Автоматическое определение языка документа.
* Поиск похожих документов в базе знаний.
* Уведомления об успешной обработке и ошибки через Telegram.
* Добавление тегов или категорий для документов.


Хочешь, чтобы я сделал такую версию?
